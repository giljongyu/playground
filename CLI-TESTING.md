# CLI 테스트 방법

모노레포에서 CLI 패키지를 테스트하는 방법에는 여러 가지가 있습니다. 각 방법의 특징과 사용 사례를 설명합니다.

## 1. 직접 실행 방식

개발 중에 가장 간단하게 테스트할 수 있는 방법입니다.

```bash
# CLI 패키지 디렉토리에서
node dist/index.js [options]

# 또는 루트 디렉토리에서
node packages/cli/dist/index.js [options]
```

### 장점

- 빠르고 간단하게 테스트 가능
- 빌드된 결과물을 직접 실행하므로 실제 동작 확인 가능
- 디버깅이 용이함

### 단점

- 실제 패키지가 설치된 환경과는 차이가 있을 수 있음
- bin 설정이 제대로 동작하는지 확인할 수 없음

## 2. npm/pnpm link 방식

전역에 심볼릭 링크를 생성하여 실제 패키지처럼 사용하는 방법입니다.

```bash
# CLI 패키지 디렉토리에서
pnpm link ./packages/cli

# 이후 어디서든
pnpm clean-mono [options]
```

### 장점

- 실제 패키지가 설치된 것처럼 테스트 가능
- bin 설정이 제대로 동작하는지 확인 가능

### 단점

- 전역 설치가 필요함
- 환경 설정이 필요할 수 있음
- 다른 개발자와 공유하기 어려울 수 있음

## 3. workspace 스크립트 방식

package.json의 scripts를 활용하는 방법입니다.

```json
{
  "scripts": {
    "cli": "node dist/index.js"
  }
}
```

```bash
# CLI 패키지 디렉토리에서
pnpm cli [options]
```

### 장점

- 프로젝트 설정으로 관리 가능
- 다른 개발자와 쉽게 공유 가능
- 추가 환경 설정이 필요 없음

### 단점

- 실제 패키지 설치 환경과는 차이가 있을 수 있음
- bin 설정을 테스트할 수 없음

## 권장 테스트 시나리오

1. 개발 중에는 `직접 실행 방식`을 사용하여 빠르게 테스트
2. 기능이 완성되면 `workspace 스크립트 방식`으로 팀원들과 함께 테스트
3. 배포 전에 `npm/pnpm link 방식`으로 실제 설치 환경 테스트

## 주의사항

- 테스트 전에 항상 최신 빌드가 되어있는지 확인
- 실행 권한 문제가 있다면 `chmod +x dist/index.js` 실행
- bin 필드가 package.json에 올바르게 설정되어 있는지 확인
- 테스트 시 다양한 옵션과 에지 케이스를 고려
